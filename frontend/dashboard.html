<!-- frontend/dashboard.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Dashboard - Academia Cante</title>
</head>
<body>
    <h2>Bienvenido/a a tu panel</h2>

    <div id="info-usuario">
        Cargando información...
    </div>

    <button onclick="logout()">Cerrar sesión</button>

    <script>
        async function cargarPerfil() {
            const token = localStorage.getItem('token');
            if (!token) {
                alert("No has iniciado sesión");
                window.location.href = "/login";
                return;
            }

            const res = await fetch('/perfil', {
                headers: { 'Authorization': 'Bearer ' + token }
            });

            if (res.ok) {
                const data = await res.json();
                document.getElementById('info-usuario').innerHTML = `
                    <p><strong>Nombre:</strong> ${data.nombre}</p>
                    <p><strong>Email:</strong> ${data.email}</p>
                    <p><strong>Oposición:</strong> ${data.oposicion}</p>
                `;
            } else {
                alert("Token inválido o expirado. Inicia sesión de nuevo.");
                window.location.href = "/login";
            }
        }

        function logout() {
            localStorage.removeItem('token');
            window.location.href = "/login";
        }

        cargarPerfil();
    </script>
</body>
</html>
